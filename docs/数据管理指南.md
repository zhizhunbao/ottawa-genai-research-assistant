# æ•°æ®ç®¡ç†æŒ‡å—

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜äº†å¦‚ä½•ç®¡ç†ã€é…ç½®å’Œåˆ‡æ¢Ottawa GenAI Research AssistantåŸå‹ä¸­çš„Mockæ•°æ®ã€‚

## ğŸ“š ç›®å½•

- [Mockæ•°æ®æ¦‚è¿°](#mockæ•°æ®æ¦‚è¿°)
- [æ•°æ®ç»“æ„è¯¦æƒ…](#æ•°æ®ç»“æ„è¯¦æƒ…)
- [ç”¨æˆ·è®¤è¯æ•°æ®ç®¡ç†](#ç”¨æˆ·è®¤è¯æ•°æ®ç®¡ç†)
- [å¦‚ä½•åˆ‡æ¢Mockæ•°æ®](#å¦‚ä½•åˆ‡æ¢mockæ•°æ®)
- [è‡ªå®šä¹‰Mockæ•°æ®](#è‡ªå®šä¹‰mockæ•°æ®)
- [æ•°æ®æ›´æ–°ç­–ç•¥](#æ•°æ®æ›´æ–°ç­–ç•¥)
- [è°ƒè¯•å’Œæµ‹è¯•](#è°ƒè¯•å’Œæµ‹è¯•)
- [è¿ç§»åˆ°åç«¯API](#è¿ç§»åˆ°åç«¯api)

## ğŸ¯ Mockæ•°æ®æ¦‚è¿°

Mockæ•°æ®å±‚ä½äº `ottawa-genai-prototype/src/mock/` ç›®å½•ï¼Œæä¾›å®Œæ•´çš„æ¨¡æ‹Ÿæ•°æ®é›†ï¼Œæ”¯æŒåŸå‹çš„æ‰€æœ‰åŠŸèƒ½è€Œæ— éœ€çœŸå®åç«¯ã€‚

### ğŸ“ æ–‡ä»¶ç»“æ„
```
ottawa-genai-prototype/src/mock/
â”œâ”€â”€ api/
â”‚   â””â”€â”€ mockApi.ts           # Mock API ç«¯ç‚¹å®ç°
â”œâ”€â”€ data/                    # æ‰€æœ‰Mockæ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ charts.ts           # å›¾è¡¨æ•°æ®
â”‚   â”œâ”€â”€ files.ts            # æ–‡ä»¶ä¸Šä¼ æ•°æ®
â”‚   â”œâ”€â”€ messages.ts         # èŠå¤©æ¶ˆæ¯æ•°æ®
â”‚   â”œâ”€â”€ reports.ts          # æŠ¥å‘Šæ•°æ®
â”‚   â”œâ”€â”€ stats.ts            # ç»Ÿè®¡æ•°æ®
â”‚   â”œâ”€â”€ translations.ts     # å¤šè¯­è¨€ç¿»è¯‘
â”‚   â””â”€â”€ index.ts            # æ•°æ®å¯¼å‡º
â”œâ”€â”€ types/
â”‚   â””â”€â”€ index.ts            # TypeScriptç±»å‹å®šä¹‰
â””â”€â”€ index.ts                # Mockå±‚å¯¼å‡º
```

## ğŸ“Š æ•°æ®ç»“æ„è¯¦æƒ…

### 1. æŠ¥å‘Šæ•°æ® (`reports.ts`)

```typescript
interface Report {
  id: string;                              // å”¯ä¸€æ ‡è¯†ç¬¦
  title: string;                          // æŠ¥å‘Šæ ‡é¢˜
  generatedAt: Date;                      // ç”Ÿæˆæ—¶é—´
  type: 'summary' | 'analysis' | 'trend'; // æŠ¥å‘Šç±»å‹
  status: 'completed' | 'processing' | 'error'; // çŠ¶æ€
}
```

**å½“å‰Mockæ•°æ®**:
- Q1 2024 Economic Development Summary
- Small Business Growth Analysis  
- Employment Trends Report

**å¦‚ä½•æ·»åŠ æ–°æŠ¥å‘Š**:
```typescript
export const mockReports: Report[] = [
  // ... ç°æœ‰æŠ¥å‘Š
  {
    id: '4', // ç¡®ä¿IDå”¯ä¸€
    title: 'Q2 2024 Technology Sector Analysis',
    generatedAt: new Date('2024-04-15'),
    type: 'analysis',
    status: 'completed'
  }
];
```

### 2. èŠå¤©æ¶ˆæ¯æ•°æ® (`messages.ts`)

```typescript
interface Message {
  id: string;           // æ¶ˆæ¯ID
  type: 'user' | 'assistant'; // æ¶ˆæ¯ç±»å‹
  content: string;      // æ¶ˆæ¯å†…å®¹
  timestamp: Date;      // æ—¶é—´æˆ³
  chart?: any;          // å¯é€‰å›¾è¡¨æ•°æ®
  hasChart?: boolean;   // æ˜¯å¦åŒ…å«å›¾è¡¨
}
```

**é¢„è®¾å“åº”æ¨¡å¼**:
- `business`: å•†ä¸šå¢é•¿åˆ†æ
- `employment`: å°±ä¸šè¶‹åŠ¿åˆ†æ
- `default`: é»˜è®¤å¸®åŠ©ä¿¡æ¯

**è‡ªå®šä¹‰AIå“åº”**:
```typescript
export const mockResponsePatterns = {
  // æ·»åŠ æ–°çš„å“åº”æ¨¡å¼
  housing: {
    content: `## ä½æˆ¿å¸‚åœºåˆ†æ
    
### å…³é”®æŒ‡æ ‡:
- **æ–°å»ºä½æˆ¿**: å¢é•¿12.5%
- **å¹³å‡æˆ¿ä»·**: $485,000 (+3.2%)
- **ç§Ÿèµå¸‚åœº**: ç©ºç½®ç‡4.1%
    
### è¶‹åŠ¿åˆ†æ:
ä½æˆ¿éœ€æ±‚æŒç»­å¢é•¿ï¼Œç‰¹åˆ«æ˜¯åœ¨ç§‘æŠ€èµ°å»Šåœ°åŒº...`,
    hasChart: true,
    chart: [/* ä½æˆ¿æ•°æ® */]
  }
};
```

### 3. æ–‡ä»¶ä¸Šä¼ æ•°æ® (`files.ts`)

```typescript
interface UploadedFile {
  id: string;                                    // æ–‡ä»¶ID
  name: string;                                  // æ–‡ä»¶å
  size: number;                                  // æ–‡ä»¶å¤§å°(å­—èŠ‚)
  type: string;                                  // MIMEç±»å‹
  status: 'uploading' | 'completed' | 'error';  // ä¸Šä¼ çŠ¶æ€
  progress: number;                              // ä¸Šä¼ è¿›åº¦(0-100)
  uploadedAt: Date;                             // ä¸Šä¼ æ—¶é—´
}
```

**æ·»åŠ æ–°æ–‡ä»¶**:
```typescript
export const mockUploadedFiles: UploadedFile[] = [
  // ... ç°æœ‰æ–‡ä»¶
  {
    id: '3',
    name: 'Tourism Impact Study.pdf',
    size: 3200000,
    type: 'application/pdf',
    status: 'completed',
    progress: 100,
    uploadedAt: new Date('2024-02-01')
  }
];
```

### 4. ç»Ÿè®¡æ•°æ® (`stats.ts`)

```typescript
interface StatData {
  number: string;  // ç»Ÿè®¡æ•°å­—
  label: string;   // ç»Ÿè®¡æ ‡ç­¾
}
```

**å½“å‰ç»Ÿè®¡é¡¹**:
- 10+ Documents Processed
- 500+ Questions Answered
- 2 Languages Supported  
- 100% WCAG Compliant

### 5. å›¾è¡¨æ•°æ® (`charts.ts`)

åŒ…å«å¤šç§å¯è§†åŒ–æ•°æ®:

**å•†ä¸šå¢é•¿æ•°æ®**:
```typescript
businessGrowth: [
  { month: 'Jan', businesses: 120, growth: 5.2 },
  { month: 'Feb', businesses: 125, growth: 6.1 },
  // ...
]
```

**è¡Œä¸šåˆ†ææ•°æ®**:
```typescript
sectorAnalysis: [
  { sector: 'Technology', growth: 22, businesses: 145 },
  { sector: 'Healthcare', growth: 18, businesses: 98 },
  // ...
]
```

**å°±ä¸šåˆ†å¸ƒæ•°æ®**:
```typescript
employmentDistribution: [
  { name: 'Full-time', value: 65, color: '#667eea' },
  { name: 'Part-time', value: 25, color: '#10b981' },
  // ...
]
```

### 6. å¤šè¯­è¨€ç¿»è¯‘ (`translations.ts`)

```typescript
interface Translations {
  [language: string]: {
    [key: string]: string;
  };
}
```

**æ”¯æŒè¯­è¨€**: English (en), FranÃ§ais (fr)

**æ·»åŠ æ–°ç¿»è¯‘**:
```typescript
export const mockTranslations: Translations = {
  en: {
    // ... ç°æœ‰ç¿»è¯‘
    'reports.new': 'New Report Generated',
    'analysis.complete': 'Analysis Complete'
  },
  fr: {
    // ... ç°æœ‰ç¿»è¯‘  
    'reports.new': 'Nouveau Rapport GÃ©nÃ©rÃ©',
    'analysis.complete': 'Analyse TerminÃ©e'
  }
};
```

## ğŸ” ç”¨æˆ·è®¤è¯æ•°æ®ç®¡ç†

### ğŸ“‹ **ç”¨æˆ·æ•°æ®åŸºç¡€è®¾æ–½ï¼ˆè®¤è¯å°±ç»ªï¼‰**

æ¸¥å¤ªåGenAIç ”ç©¶åŠ©æ‰‹å·²ç»åœ¨åç«¯æ„å»ºäº†å®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿï¼Œä¸ºå®æ–½è®¤è¯æä¾›äº†åšå®çš„åŸºç¡€ã€‚

#### **ç°æœ‰ç”¨æˆ·æ•°æ®ç»“æ„**

**ä½ç½®ï¼š** `backend/monk/users/users.json`

```typescript
interface User {
  id: string;                              // å”¯ä¸€ç”¨æˆ·æ ‡è¯†ç¬¦
  username: string;                        // ç™»å½•ç”¨æˆ·å
  email: string;                          // ç”¨æˆ·é‚®ç®±åœ°å€
  role: 'researcher' | 'analyst' | 'admin'; // ç”¨æˆ·è§’è‰²
  status: 'active' | 'inactive' | 'suspended'; // è´¦æˆ·çŠ¶æ€
  created_at: string;                     // è´¦æˆ·åˆ›å»ºæ—¥æœŸ
  last_login?: string;                    // æœ€åç™»å½•æ—¶é—´æˆ³
  preferences: {                          // ç”¨æˆ·åå¥½è®¾ç½®
    language: 'en' | 'fr';               // ç•Œé¢è¯­è¨€
    theme: 'light' | 'dark' | 'auto';    // ä¸»é¢˜åå¥½
    notifications: boolean;               // é€šçŸ¥è®¾ç½®
    default_topics: string[];            // é»˜è®¤ç ”ç©¶ä¸»é¢˜
  };
  metadata: {                             // ç”¨æˆ·å…ƒæ•°æ®
    department?: string;                  // ç”¨æˆ·éƒ¨é—¨
    access_level: 'standard' | 'advanced' | 'admin'; // è®¿é—®çº§åˆ«
  };
}
```

#### **é¢„é…ç½®æµ‹è¯•ç”¨æˆ·**

```json
[
  {
    "id": "user_001",
    "username": "john_researcher",
    "email": "john@ottawa.ca",
    "role": "researcher",
    "status": "active",
    "preferences": {
      "language": "en",
      "theme": "light",
      "default_topics": ["economic", "business"]
    },
    "metadata": {
      "department": "Economic Development",
      "access_level": "standard"
    }
  },
  {
    "id": "user_002",
    "username": "marie_analyst", 
    "email": "marie@ottawa.ca",
    "role": "analyst",
    "status": "active",
    "preferences": {
      "language": "fr",
      "theme": "dark",
      "default_topics": ["business", "innovation"]
    },
    "metadata": {
      "department": "Business Development",
      "access_level": "advanced"
    }
  },
  {
    "id": "user_003",
    "username": "admin_user",
    "email": "admin@ottawa.ca",
    "role": "admin", 
    "status": "active",
    "preferences": {
      "language": "en",
      "theme": "light",
      "default_topics": ["all"]
    },
    "metadata": {
      "department": "IT Services",
      "access_level": "admin"
    }
  }
]
```

### ğŸ”‘ **è®¤è¯æ•°æ®ç®¡ç†**

#### **ä¼šè¯ç®¡ç†ï¼ˆå¾…å®æ–½ï¼‰**

```typescript
interface UserSession {
  session_id: string;        // å”¯ä¸€ä¼šè¯æ ‡è¯†ç¬¦
  user_id: string;          // å…³è”ç”¨æˆ·ID
  username: string;         // ç”¨æˆ·åï¼ˆå¿«é€Ÿè®¿é—®ï¼‰
  role: string;             // ç”¨æˆ·è§’è‰²ï¼ˆç”¨äºæˆæƒï¼‰
  created_at: Date;         // ä¼šè¯åˆ›å»ºæ—¶é—´
  expires_at: Date;         // ä¼šè¯è¿‡æœŸæ—¶é—´
  last_activity: Date;      // æœ€åæ´»åŠ¨æ—¶é—´æˆ³
  is_active: boolean;       // ä¼šè¯çŠ¶æ€
}
```

#### **JWTä»¤ç‰Œç»“æ„ï¼ˆè®¡åˆ’ä¸­ï¼‰**

```typescript
interface JWTPayload {
  sub: string;              // ä¸»é¢˜ï¼ˆuser_idï¼‰
  username: string;         // ç”¨æˆ·å
  role: string;             // ç”¨æˆ·è§’è‰²
  access_level: string;     // è®¿é—®çº§åˆ«
  department?: string;      // ç”¨æˆ·éƒ¨é—¨
  iat: number;              // ç­¾å‘æ—¶é—´
  exp: number;              // è¿‡æœŸæ—¶é—´
}
```

### ğŸš€ **è®¤è¯å®æ–½ç­–ç•¥**

#### **é˜¶æ®µ1ï¼šç®€å•ç”¨æˆ·åè®¤è¯**

**ä¸ºå¿«é€Ÿéƒ¨ç½²ï¼Œå®æ–½ä»…ç”¨æˆ·åè®¤è¯ï¼š**

1. **ç™»å½•æµç¨‹ï¼š**
   ```typescript
   // ç”¨æˆ·ä»å¯ç”¨ç”¨æˆ·ä¸‹æ‹‰åˆ—è¡¨ä¸­é€‰æ‹©
   const availableUsers = [
     { username: 'john_researcher', display: 'Johnï¼ˆç»æµå‘å±•éƒ¨ï¼‰' },
     { username: 'marie_analyst', display: 'Marieï¼ˆå•†ä¸šå‘å±•éƒ¨ï¼‰' },
     { username: 'admin_user', display: 'Adminï¼ˆITæœåŠ¡éƒ¨ï¼‰' }
   ];
   ```

2. **ä¼šè¯åˆ›å»ºï¼š**
   ```typescript
   // ç”¨æˆ·é€‰æ‹©ååˆ›å»ºä¼šè¯
   const session = {
     session_id: generateUUID(),
     user_id: selectedUser.id,
     username: selectedUser.username,
     role: selectedUser.role,
     created_at: new Date(),
     expires_at: new Date(Date.now() + 3600000), // 1å°æ—¶
     is_active: true
   };
   ```

#### **é˜¶æ®µ2ï¼šå¢å¼ºå®‰å…¨ï¼ˆæœªæ¥ï¼‰**

**ä¸ºç”Ÿäº§éƒ¨ç½²ï¼Œæ·»åŠ å¯†ç è®¤è¯ï¼š**

```typescript
interface UserCredentials {
  username: string;
  password_hash: string;    // bcryptå“ˆå¸Œå¯†ç 
  salt: string;            // å¯†ç ç›å€¼
  password_changed_at: Date; // æœ€åå¯†ç æ›´æ”¹æ—¶é—´
  failed_login_attempts: number; // å¤±è´¥ç™»å½•è®¡æ•°å™¨
  locked_until?: Date;     // è´¦æˆ·é”å®šè¿‡æœŸæ—¶é—´
}
```

### ğŸ“Š **åŸºäºè§’è‰²çš„æ•°æ®è®¿é—®**

#### **æŒ‰è§’è‰²çš„æ•°æ®éš”ç¦»ï¼š**

| æ•°æ®ç±»å‹ | ç ”ç©¶å‘˜ | åˆ†æå¸ˆ | ç®¡ç†å‘˜ |
|----------|-------|-------|-------|
| **è‡ªå·±çš„èŠå¤©å†å²** | âœ… è¯»/å†™ | âœ… è¯»/å†™ | âœ… è¯»/å†™ |
| **è‡ªå·±çš„æ–‡æ¡£** | âœ… è¯»/å†™ | âœ… è¯»/å†™ | âœ… è¯»/å†™ |
| **è‡ªå·±çš„æŠ¥å‘Š** | âœ… è¯»/å†™ | âœ… è¯»/å†™ | âœ… è¯»/å†™ |
| **å…¶ä»–ç”¨æˆ·æ•°æ®** | âŒ æ— æƒé™ | âŒ æ— æƒé™ | âœ… åªè¯» |
| **ç³»ç»Ÿè®¾ç½®** | âŒ æ— æƒé™ | âŒ æ— æƒé™ | âœ… è¯»/å†™ |
| **ç”¨æˆ·ç®¡ç†** | âŒ æ— æƒé™ | âŒ æ— æƒé™ | âœ… å®Œå…¨è®¿é—® |

#### **å¸¦ç”¨æˆ·å…³è”çš„æ•°æ®ç»“æ„ï¼š**

```typescript
// å¸¦ç”¨æˆ·ä¸Šä¸‹æ–‡çš„èŠå¤©æ¶ˆæ¯
interface ChatMessage {
  id: string;
  user_id: string;          // å…³è”ç”¨æˆ·
  conversation_id: string;   // å¯¹è¯åˆ†ç»„
  type: 'user' | 'assistant';
  content: string;
  timestamp: Date;
  chart?: any;
}

// å¸¦æ‰€æœ‰æƒçš„æ–‡æ¡£
interface Document {
  id: string;
  uploaded_by: string;      // ä¸Šä¼ è€…ç”¨æˆ·ID
  filename: string;
  access_level: 'private' | 'department' | 'public';
  // ... å…¶ä»–å­—æ®µ
}

// å¸¦åˆ›å»ºè€…è·Ÿè¸ªçš„æŠ¥å‘Š
interface Report {
  id: string;
  created_by: string;       // åˆ›å»ºè€…ç”¨æˆ·ID
  title: string;
  generated_at: Date;
  access_level: 'private' | 'department' | 'public';
  // ... å…¶ä»–å­—æ®µ
}
```

### ğŸ”§ **è®¤è¯å®æ–½æ­¥éª¤**

#### **æ­¥éª¤1ï¼šæ›´æ–°åç«¯ç”¨æˆ·æœåŠ¡**

```python
# backend/app/api/auth.pyï¼ˆæ–°æ–‡ä»¶ï¼‰
from fastapi import APIRouter, HTTPException, Depends
from app.services.auth_service import AuthService

router = APIRouter()

@router.post("/login")
async def login(username: str):
    # é˜¶æ®µ1çš„ç®€åŒ–ç™»å½•
    user = await auth_service.authenticate_user(username)
    if not user:
        raise HTTPException(status_code=401, detail="ç”¨æˆ·æœªæ‰¾åˆ°")
    
    # åˆ›å»ºä¼šè¯å’ŒJWTä»¤ç‰Œ
    token = await auth_service.create_token(user)
    return {"access_token": token, "token_type": "bearer", "user": user}
```

#### **æ­¥éª¤2ï¼šæ·»åŠ å‰ç«¯è®¤è¯ä¸Šä¸‹æ–‡**

```typescript
// frontend/src/contexts/AuthContext.tsxï¼ˆæ–°æ–‡ä»¶ï¼‰
interface AuthContextType {
  user: User | null;
  login: (username: string) => Promise<void>;
  logout: () => void;
  isAuthenticated: boolean;
  isLoading: boolean;
}

export const AuthProvider: React.FC<{children: React.ReactNode}> = ({children}) => {
  const [user, setUser] = useState<User | null>(null);
  const [isLoading, setIsLoading] = useState(true);
  
  // è®¤è¯é€»è¾‘å®ç°
  // ...
};
```

#### **æ­¥éª¤3ï¼šä¿æŠ¤è·¯ç”±**

```typescript
// frontend/src/components/ProtectedRoute.tsxï¼ˆæ–°æ–‡ä»¶ï¼‰
interface ProtectedRouteProps {
  children: React.ReactNode;
  requiredRole?: string;
  requiredPermission?: string;
}

export const ProtectedRoute: React.FC<ProtectedRouteProps> = ({
  children,
  requiredRole,
  requiredPermission
}) => {
  const { user, isAuthenticated } = useAuth();
  
  if (!isAuthenticated) {
    return <Navigate to="/login" />;
  }
  
  if (requiredRole && user?.role !== requiredRole) {
    return <div>è®¿é—®è¢«æ‹’ç»</div>;
  }
  
  return <>{children}</>;
};
```

### ğŸ›¡ï¸ **å®‰å…¨æœ€ä½³å®è·µ**

#### **ä¼šè¯å®‰å…¨ï¼š**
- **è¶…æ—¶ç®¡ç†ï¼š** 60åˆ†é’Ÿä¼šè¯ï¼ŒåŸºäºæ´»åŠ¨çš„ç»­æœŸ
- **å®‰å…¨å­˜å‚¨ï¼š** ä¼šè¯ä»¤ç‰Œä½¿ç”¨HTTPOnly cookies
- **CSRFä¿æŠ¤ï¼š** çŠ¶æ€æ›´æ”¹æ“ä½œçš„åCSRFä»¤ç‰Œ
- **ä¼šè¯å¤±æ•ˆï¼š** é€‚å½“çš„æ³¨é”€å’Œä¼šè¯æ¸…ç†

#### **æ•°æ®ä¿æŠ¤ï¼š**
- **ç”¨æˆ·éš”ç¦»ï¼š** ç”¨æˆ·åªèƒ½è®¿é—®è‡ªå·±çš„æ•°æ®
- **è§’è‰²éªŒè¯ï¼š** æ‰€æœ‰æ“ä½œçš„æœåŠ¡å™¨ç«¯è§’è‰²éªŒè¯
- **å®¡è®¡æ—¥å¿—ï¼š** è®°å½•æ‰€æœ‰è®¤è¯å’Œæˆæƒäº‹ä»¶
- **è¾“å…¥éªŒè¯ï¼š** æ¸…ç†æ‰€æœ‰ç”¨æˆ·è¾“å…¥

#### **æ”¿åºœåˆè§„ï¼š**
- **è®¿é—®æ—¥å¿—ï¼š** ä¸ºå®¡è®¡ç›®çš„è·Ÿè¸ªæ‰€æœ‰ç”¨æˆ·æ´»åŠ¨
- **æ•°æ®ä¿ç•™ï¼š** ç”¨æˆ·æ•°æ®çš„å¯é…ç½®ä¿ç•™ç­–ç•¥
- **éšç§ä¿æŠ¤ï¼š** ä¸å­˜å‚¨æ•æ„Ÿä¸ªäººä¿¡æ¯
- **å®‰å…¨å¤´ï¼š** å®æ–½é€‚å½“çš„HTTPå®‰å…¨å¤´

## ğŸ”„ å¦‚ä½•åˆ‡æ¢Mockæ•°æ®

### 1. é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶

```bash
# ä½¿ç”¨Mockæ•°æ® (å¼€å‘/æ¼”ç¤º)
export REACT_APP_API_STRATEGY=mock

# æ··åˆæ¨¡å¼ (å¼€å‘é˜¶æ®µæ¨è)
export REACT_APP_API_STRATEGY=hybrid

# çœŸå®API (ç”Ÿäº§ç¯å¢ƒ)
export REACT_APP_API_STRATEGY=real
```

### 2. åŠ¨æ€æ•°æ®åˆ‡æ¢

å¦‚æœéœ€è¦åœ¨è¿è¡Œæ—¶åˆ‡æ¢ä¸åŒçš„Mockæ•°æ®é›†:

```typescript
// åˆ›å»ºå¤šä¸ªæ•°æ®é›†
export const mockDataSets = {
  demo: {
    reports: demoReports,
    messages: demoMessages,
    stats: demoStats
  },
  development: {
    reports: devReports, 
    messages: devMessages,
    stats: devStats
  },
  testing: {
    reports: testReports,
    messages: testMessages,
    stats: testStats
  }
};

// åœ¨mockApi.tsä¸­æ ¹æ®ç¯å¢ƒé€‰æ‹©æ•°æ®é›†
const getCurrentDataSet = () => {
  const env = process.env.REACT_APP_MOCK_DATA_SET || 'demo';
  return mockDataSets[env] || mockDataSets.demo;
};
```

### 3. æ—¶é—´åŸºç¡€çš„åŠ¨æ€æ•°æ®

åˆ›å»ºåŸºäºæ—¶é—´çš„åŠ¨æ€Mockæ•°æ®:

```typescript
// ç”ŸæˆåŠ¨æ€æ—¥æœŸçš„æŠ¥å‘Š
const generateDynamicReports = (): Report[] => {
  const now = new Date();
  return [
    {
      id: '1',
      title: `Q${Math.ceil((now.getMonth() + 1) / 3)} ${now.getFullYear()} Economic Summary`,
      generatedAt: new Date(now.getTime() - 24 * 60 * 60 * 1000), // æ˜¨å¤©
      type: 'summary',
      status: 'completed'
    }
    // ...
  ];
};
```

## âœ¨ è‡ªå®šä¹‰Mockæ•°æ®

### 1. åˆ›å»ºæ–°çš„æ•°æ®ç±»å‹

1. **å®šä¹‰TypeScriptæ¥å£** (`src/mock/types/index.ts`):
```typescript
export interface ProjectData {
  id: string;
  name: string;
  status: 'active' | 'completed' | 'pending';
  budget: number;
  startDate: Date;
  department: string;
}
```

2. **åˆ›å»ºMockæ•°æ®æ–‡ä»¶** (`src/mock/data/projects.ts`):
```typescript
import { ProjectData } from '../types';

export const mockProjects: ProjectData[] = [
  {
    id: '1',
    name: 'Downtown Revitalization',
    status: 'active', 
    budget: 2500000,
    startDate: new Date('2024-01-01'),
    department: 'Urban Planning'
  }
  // ...
];
```

3. **æ·»åŠ APIç«¯ç‚¹** (`src/mock/api/mockApi.ts`):
```typescript
import { mockProjects } from '../data/projects';

export const mockApi = {
  // ... ç°æœ‰ç«¯ç‚¹
  
  async getProjects(): Promise<ProjectData[]> {
    await delay(300);
    return mockProjects;
  },
  
  async getProject(id: string): Promise<ProjectData | null> {
    await delay(200);
    return mockProjects.find(p => p.id === id) || null;
  }
};
```

### 2. é«˜çº§Mockæ•°æ®åŠŸèƒ½

**æœç´¢å’Œè¿‡æ»¤**:
```typescript
async searchReports(query: string): Promise<Report[]> {
  await delay(400);
  return mockReports.filter(report => 
    report.title.toLowerCase().includes(query.toLowerCase())
  );
}
```

**åˆ†é¡µæ”¯æŒ**:
```typescript
async getReportsPaginated(page: number = 1, limit: number = 10): Promise<{
  reports: Report[];
  total: number;
  hasMore: boolean;
}> {
  await delay(500);
  const start = (page - 1) * limit;
  const end = start + limit;
  const reports = mockReports.slice(start, end);
  
  return {
    reports,
    total: mockReports.length,
    hasMore: end < mockReports.length
  };
}
```

**çŠ¶æ€æ¨¡æ‹Ÿ**:
```typescript
async generateReport(type: string): Promise<Report> {
  const report: Report = {
    id: Date.now().toString(),
    title: `${type} Report - ${new Date().toLocaleDateString()}`,
    generatedAt: new Date(),
    type: type as any,
    status: 'processing'
  };
  
  // æ¨¡æ‹Ÿå¤„ç†è¿‡ç¨‹
  setTimeout(() => {
    report.status = 'completed';
  }, 3000);
  
  return report;
}
```

## ğŸ“ˆ æ•°æ®æ›´æ–°ç­–ç•¥

### 1. å®æ—¶æ•°æ®æ¨¡æ‹Ÿ

```typescript
// æ¨¡æ‹Ÿå®æ—¶ç»Ÿè®¡æ›´æ–°
class MockDataManager {
  private updateInterval: NodeJS.Timeout;
  
  constructor() {
    this.startRealtimeUpdates();
  }
  
  private startRealtimeUpdates() {
    this.updateInterval = setInterval(() => {
      // æ›´æ–°ç»Ÿè®¡æ•°æ®
      mockStats[0].number = `${Math.floor(Math.random() * 100) + 10}+`;
      mockStats[1].number = `${Math.floor(Math.random() * 1000) + 500}+`;
      
      // è§¦å‘æ›´æ–°äº‹ä»¶
      window.dispatchEvent(new CustomEvent('mockDataUpdate'));
    }, 30000); // æ¯30ç§’æ›´æ–°
  }
  
  stopUpdates() {
    clearInterval(this.updateInterval);
  }
}
```

### 2. ç”¨æˆ·äº¤äº’å“åº”

```typescript
// æ ¹æ®ç”¨æˆ·æ“ä½œæ›´æ–°æ•°æ®
const simulateUserImpact = (action: string) => {
  switch (action) {
    case 'upload_file':
      mockStats[0].number = `${parseInt(mockStats[0].number) + 1}+`;
      break;
    case 'ask_question':
      mockStats[1].number = `${parseInt(mockStats[1].number) + 1}+`;
      break;
  }
};
```

## ğŸ§ª è°ƒè¯•å’Œæµ‹è¯•

### 1. Mockæ•°æ®éªŒè¯

```typescript
// æ•°æ®éªŒè¯å·¥å…·
const validateMockData = () => {
  const issues = [];
  
  // æ£€æŸ¥IDå”¯ä¸€æ€§
  const reportIds = mockReports.map(r => r.id);
  const uniqueIds = [...new Set(reportIds)];
  if (reportIds.length !== uniqueIds.length) {
    issues.push('Duplicate report IDs found');
  }
  
  // æ£€æŸ¥å¿…å¡«å­—æ®µ
  mockReports.forEach(report => {
    if (!report.title || !report.id) {
      issues.push(`Invalid report: ${report.id}`);
    }
  });
  
  return issues;
};

// åœ¨å¼€å‘æ¨¡å¼ä¸‹è¿è¡ŒéªŒè¯
if (process.env.NODE_ENV === 'development') {
  const issues = validateMockData();
  if (issues.length > 0) {
    console.warn('Mock data issues:', issues);
  }
}
```

### 2. æ•°æ®å¯¼å‡ºå·¥å…·

```typescript
// å¯¼å‡ºMockæ•°æ®ç”¨äºåˆ†æ
const exportMockData = () => {
  const data = {
    reports: mockReports,
    files: mockUploadedFiles,
    stats: mockStats,
    translations: mockTranslations,
    timestamp: new Date().toISOString()
  };
  
  const blob = new Blob([JSON.stringify(data, null, 2)], {
    type: 'application/json'
  });
  
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `mock-data-${Date.now()}.json`;
  a.click();
};
```

### 3. A/Bæµ‹è¯•æ”¯æŒ

```typescript
// æ”¯æŒä¸åŒç‰ˆæœ¬çš„Mockæ•°æ®
const getTestVariant = () => {
  const userId = localStorage.getItem('userId') || 'anonymous';
  const hash = userId.split('').reduce((a, b) => {
    a = ((a << 5) - a) + b.charCodeAt(0);
    return a & a;
  }, 0);
  
  return Math.abs(hash) % 2 === 0 ? 'A' : 'B';
};

const getMockDataForVariant = (variant: string) => {
  return variant === 'A' ? mockDataVariantA : mockDataVariantB;
};
```

## ğŸ›ï¸ é…ç½®é€‰é¡¹

åœ¨ `.env` æ–‡ä»¶ä¸­æ·»åŠ Mockæ•°æ®é…ç½®:

```bash
# Mockæ•°æ®é…ç½®
REACT_APP_API_STRATEGY=mock
REACT_APP_MOCK_DATA_SET=demo
REACT_APP_MOCK_DELAY_MIN=200
REACT_APP_MOCK_DELAY_MAX=800
REACT_APP_MOCK_ERROR_RATE=0.05
REACT_APP_ENABLE_MOCK_LOGS=true
```

åœ¨ä»£ç ä¸­ä½¿ç”¨é…ç½®:

```typescript
const mockConfig = {
  dataSet: process.env.REACT_APP_MOCK_DATA_SET || 'demo',
  delayMin: parseInt(process.env.REACT_APP_MOCK_DELAY_MIN || '200'),
  delayMax: parseInt(process.env.REACT_APP_MOCK_DELAY_MAX || '800'),
  errorRate: parseFloat(process.env.REACT_APP_MOCK_ERROR_RATE || '0'),
  enableLogs: process.env.REACT_APP_ENABLE_MOCK_LOGS === 'true'
};
```

## ğŸš€ æœ€ä½³å®è·µ

### 1. æ•°æ®ä¸€è‡´æ€§
- ä¿æŒIDçš„å”¯ä¸€æ€§
- ä½¿ç”¨ç›¸åŒçš„æ—¥æœŸæ ¼å¼
- ç¡®ä¿å¼•ç”¨å®Œæ•´æ€§

### 2. æ€§èƒ½ä¼˜åŒ–
- ä½¿ç”¨é€‚å½“çš„å»¶è¿Ÿæ¨¡æ‹ŸçœŸå®ç½‘ç»œ
- é¿å…è¿‡å¤§çš„Mockæ•°æ®é›†
- å®ç°æ•°æ®æ‡’åŠ è½½

### 3. ç»´æŠ¤æ€§
- å®šæœŸæ›´æ–°Mockæ•°æ®
- ä¿æŒä¸çœŸå®APIçš„ä¸€è‡´æ€§
- æ·»åŠ æ•°æ®ç‰ˆæœ¬æ§åˆ¶

### 4. æµ‹è¯•è¦†ç›–
- æµ‹è¯•å„ç§æ•°æ®çŠ¶æ€
- æ¨¡æ‹Ÿé”™è¯¯æƒ…å†µ
- éªŒè¯è¾¹ç•Œæ¡ä»¶

## ğŸ”„ è¿ç§»åˆ°åç«¯API

å½“åŸå‹å¼€å‘å®Œæˆï¼Œéœ€è¦é›†æˆçœŸå®åç«¯APIæ—¶ï¼ŒMockæ•°æ®å±‚çš„è®¾è®¡è®©è¿ç§»å˜å¾—å¹³æ»‘å’Œæ¸è¿›ã€‚

### 1. APIç­–ç•¥é…ç½®

é¡¹ç›®æ”¯æŒä¸‰ç§APIç­–ç•¥ï¼Œå¯ä»¥é€æ­¥è¿ç§»ï¼š

```bash
# 1. çº¯Mockæ¨¡å¼ (åŸå‹é˜¶æ®µ)
REACT_APP_API_STRATEGY=mock

# 2. æ··åˆæ¨¡å¼ (è¿ç§»é˜¶æ®µ)
REACT_APP_API_STRATEGY=hybrid

# 3. çœŸå®APIæ¨¡å¼ (ç”Ÿäº§é˜¶æ®µ)
REACT_APP_API_STRATEGY=real
```

### 2. æ¸è¿›å¼è¿ç§»æ­¥éª¤

#### Step 1: å»ºç«‹APIå¥‘çº¦

é¦–å…ˆåŸºäºMockæ•°æ®å®šä¹‰çœŸå®APIçš„æ¥å£è§„èŒƒï¼š

```typescript
// src/api/types.ts - APIå¥‘çº¦å®šä¹‰
export interface ApiReport {
  id: string;
  title: string;
  generatedAt: string; // ISO 8601æ ¼å¼
  type: 'summary' | 'analysis' | 'trend';
  status: 'completed' | 'processing' | 'error';
}

export interface ApiResponse<T> {
  data: T;
  success: boolean;
  message?: string;
  timestamp: string;
}
```

#### Step 2: åˆ›å»ºAPIé€‚é…å™¨

```typescript
// src/api/realApi.ts - çœŸå®APIå®ç°
export class RealApiService {
  private baseUrl = process.env.REACT_APP_API_BASE_URL;
  
  async getReports(): Promise<ApiResponse<ApiReport[]>> {
    const response = await fetch(`${this.baseUrl}/api/reports`, {
      headers: {
        'Authorization': `Bearer ${this.getToken()}`,
        'Content-Type': 'application/json'
      }
    });
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    return response.json();
  }
  
  async generateReport(type: string): Promise<ApiResponse<ApiReport>> {
    const response = await fetch(`${this.baseUrl}/api/reports/generate`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.getToken()}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({ type })
    });
    
    return response.json();
  }
  
  private getToken(): string {
    return localStorage.getItem('auth_token') || '';
  }
}
```

#### Step 3: åˆ›å»ºç»Ÿä¸€æœåŠ¡å±‚

```typescript
// src/services/dataService.ts - ç»Ÿä¸€æ•°æ®æœåŠ¡
import { mockApi } from '../mock/api/mockApi';
import { RealApiService } from '../api/realApi';

export class DataService {
  private mockApi = mockApi;
  private realApi = new RealApiService();
  private strategy = process.env.REACT_APP_API_STRATEGY || 'mock';
  
  async getReports(): Promise<Report[]> {
    try {
      switch (this.strategy) {
        case 'mock':
          return await this.mockApi.getReports();
          
        case 'real':
          const response = await this.realApi.getReports();
          return this.transformApiReports(response.data);
          
        case 'hybrid':
          try {
            const response = await this.realApi.getReports();
            return this.transformApiReports(response.data);
          } catch (error) {
            console.warn('API failed, falling back to mock:', error);
            return await this.mockApi.getReports();
          }
          
        default:
          return await this.mockApi.getReports();
      }
    } catch (error) {
      if (this.strategy === 'hybrid') {
        console.warn('Using mock fallback due to error:', error);
        return await this.mockApi.getReports();
      }
      throw error;
    }
  }
  
  private transformApiReports(apiReports: ApiReport[]): Report[] {
    return apiReports.map(apiReport => ({
      id: apiReport.id,
      title: apiReport.title,
      generatedAt: new Date(apiReport.generatedAt),
      type: apiReport.type,
      status: apiReport.status
    }));
  }
}

// åˆ›å»ºå•ä¾‹å®ä¾‹
export const dataService = new DataService();
```

### 3. è¿ç§»æ£€æŸ¥æ¸…å•

#### ğŸ” è¿ç§»å‰æ£€æŸ¥
- [ ] APIç«¯ç‚¹æ˜¯å¦å·²å®šä¹‰å¹¶å¯è®¿é—®
- [ ] è®¤è¯æœºåˆ¶æ˜¯å¦å·²å®ç°
- [ ] æ•°æ®æ ¼å¼æ˜¯å¦ä¸Mockæ•°æ®å…¼å®¹
- [ ] é”™è¯¯å¤„ç†æ˜¯å¦å®Œå–„
- [ ] ç½‘ç»œè¶…æ—¶é…ç½®æ˜¯å¦åˆç†

#### ğŸ§ª æµ‹è¯•æ­¥éª¤
1. **æ··åˆæ¨¡å¼æµ‹è¯•**: è®¾ç½®`REACT_APP_API_STRATEGY=hybrid`
2. **APIå¯ç”¨æ€§æµ‹è¯•**: éªŒè¯æ‰€æœ‰ç«¯ç‚¹æ­£å¸¸å·¥ä½œ
3. **é”™è¯¯åœºæ™¯æµ‹è¯•**: æµ‹è¯•ç½‘ç»œæ–­å¼€ã€æœåŠ¡å™¨é”™è¯¯ç­‰æƒ…å†µ
4. **æ€§èƒ½æµ‹è¯•**: æ¯”è¾ƒMockå’ŒçœŸå®APIçš„å“åº”æ—¶é—´
5. **æ•°æ®ä¸€è‡´æ€§æµ‹è¯•**: ç¡®ä¿APIè¿”å›æ•°æ®æ ¼å¼æ­£ç¡®

#### ğŸš€ ä¸Šçº¿æ­¥éª¤
1. **é˜¶æ®µ1**: åœ¨å¼€å‘ç¯å¢ƒä½¿ç”¨æ··åˆæ¨¡å¼
2. **é˜¶æ®µ2**: åœ¨æµ‹è¯•ç¯å¢ƒä½¿ç”¨çœŸå®API
3. **é˜¶æ®µ3**: é€æ­¥åœ¨ç”Ÿäº§ç¯å¢ƒåˆ‡æ¢æ¨¡å—
4. **é˜¶æ®µ4**: å®Œå…¨åˆ‡æ¢åˆ°çœŸå®API
5. **é˜¶æ®µ5**: ç§»é™¤Mockä»£ç (å¯é€‰)

---

é€šè¿‡è¿™ä¸ªæŒ‡å—ï¼Œä½ å¯ä»¥å®Œå…¨æ§åˆ¶Mockæ•°æ®çš„è¡Œä¸ºï¼Œåˆ›å»ºä¸°å¯Œçš„åŸå‹ä½“éªŒï¼Œå¹¶ä¸ºå‘çœŸå®APIçš„è¿ç§»åšå¥½å‡†å¤‡ã€‚ 