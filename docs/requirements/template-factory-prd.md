# Template Factory â€” PRD (Product Requirements Document)

**é¡¹ç›®ä»£å·**: Template Factory (æ¨¡æ¿å·¥å‚)  
**ç‰ˆæœ¬**: 2.0 (å…ƒé¡¹ç›®ä¿®è®¢ç‰ˆ)  
**æ—¥æœŸ**: 2026-02-12  
**çŠ¶æ€**: Draft  
**ä¿®è®¢è¯´æ˜**: v2.0 å¼•å…¥å…ƒé¡¹ç›®æ¶æ„ï¼ŒBuy > Build åŸåˆ™ï¼ŒAI è¾…åŠ©è€Œéæ›¿ä»£

---

## 1. äº§å“æ„¿æ™¯ (Vision)

> **ä¸€å¥è¯**: ä¸€ä¸ªç‹¬ç«‹çš„**å…ƒé¡¹ç›®**ï¼ŒåŒ…å«å¯å¤ç”¨æ¨¡æ¿åº“ + AI è¾…åŠ©å·¥å…·é“¾ï¼Œåƒæ­ç§¯æœ¨ä¸€æ ·å¿«é€Ÿç”Ÿæˆæ–°é¡¹ç›®ã€‚

### 1.1 æ ¸å¿ƒæ¦‚å¿µï¼šå…ƒé¡¹ç›® (Meta-Project)

**å…ƒé¡¹ç›®ä¸æ˜¯ä¸€ä¸ª"åº”ç”¨"ï¼Œè€Œæ˜¯ä¸€ä¸ª"é¡¹ç›®å·¥å‚"** â€”â€” å®ƒä¸ç›´æ¥æœåŠ¡ç»ˆç«¯ç”¨æˆ·ï¼Œè€Œæ˜¯æœåŠ¡å¼€å‘è€…ï¼Œå¸®åŠ©ä»–ä»¬å¿«é€Ÿå¯åŠ¨æ–°é¡¹ç›®ã€‚

```
å…ƒé¡¹ç›® vs å…·ä½“é¡¹ç›®:

template-factory/                    â† å…ƒé¡¹ç›® (Class)
  â”œâ”€â”€ catalog/  (æ¨¡æ¿åº“)              â”‚
  â”œâ”€â”€ skills/   (AI æŠ€èƒ½)            â”‚    tf create --preset rag-chat
  â”œâ”€â”€ presets/  (é¢„ç½®å¥—é¤)            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  my-rag-app/
  â”œâ”€â”€ prompts/  (Agent æç¤ºè¯)        â”‚    tf create --preset admin
  â””â”€â”€ tf (CLI)                       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  my-admin/
                                     â”‚    tf create --preset api
                                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶  my-api/
                                              å…·ä½“é¡¹ç›® (Instances)
```

| ç±»æ¯” | å…ƒé¡¹ç›® | å…·ä½“é¡¹ç›® |
|:---|:---|:---|
| é¢å‘å¯¹è±¡ | Class (ç±»å®šä¹‰) | Instance (å®ä¾‹) |
| å»ºç­‘ | å»ºç­‘è®¾è®¡é™¢ | å…·ä½“æ¥¼ç›˜ |
| åˆ¶é€ ä¸š | æ¨¡å…· | äº§å“ |
| ç°å®å·¥å…· | `create-react-app` | ä½ çš„ React åº”ç”¨ |
| æˆ‘ä»¬çš„ç³»ç»Ÿ | `template-factory` | `ottawa-genai-research-assistant` |

### 1.2 å½“å‰çŠ¶æ€

æˆ‘ä»¬å·²ç»ç§¯ç´¯äº†å¤§é‡èµ„äº§ï¼Œä½†å®ƒä»¬**å¯„ç”Ÿåœ¨ä¸€ä¸ªå…·ä½“é¡¹ç›®é‡Œ**ï¼š

```
ottawa-genai-research-assistant/          â† å…·ä½“é¡¹ç›®
â”œâ”€â”€ backend/                              â† å…·ä½“ä¸šåŠ¡ä»£ç 
â”œâ”€â”€ frontend/                             â† å…·ä½“ä¸šåŠ¡ä»£ç 
â”œâ”€â”€ .agent/                               â† âš ï¸ å…ƒé¡¹ç›®èµ„äº§æ··åœ¨å…·ä½“é¡¹ç›®ä¸­
â”‚   â”œâ”€â”€ templates/  (128 ä¸ªæ¨¡æ¿)
â”‚   â”œâ”€â”€ skills/     (11 ä¸ª skill)
â”‚   â””â”€â”€ workflows/  (33 ä¸ªå·¥ä½œæµ)
â””â”€â”€ .github/references/ (38 ä¸ªå‚è€ƒé¡¹ç›®)
```

**é—®é¢˜**ï¼šæ¨¡æ¿å’Œå…·ä½“é¡¹ç›®è€¦åˆï¼Œæ¢ä¸€ä¸ªæ–°é¡¹ç›®å°±å¸¦ä¸èµ°ã€‚

### 1.3 ç›®æ ‡

æŠŠå…ƒé¡¹ç›®èµ„äº§ç‹¬ç«‹å‡ºæ¥ï¼Œæˆä¸ºä¸€ä¸ª**å¯å¤ç”¨çš„ã€ä¸å…·ä½“é¡¹ç›®æ— å…³çš„ç‹¬ç«‹ä»“åº“**ã€‚

---

## 2. è®¾è®¡åŸåˆ™ (Design Principles)

### åŸåˆ™ 1: Buy > Build > ä»é›¶å†™

```
å†³ç­–é¡ºåº:
1. ğŸ“¦ æœ‰æˆç†Ÿå·¥å…·ï¼Ÿ â†’ ç›´æ¥ç”¨ (Buy)
2. ğŸ”§ æœ‰å‚è€ƒå®ç°ï¼Ÿ â†’ æå–æ”¹é€  (Build on top)
3. âœï¸ éƒ½æ²¡æœ‰ï¼Ÿ     â†’ è‡ªå·±å†™ (Build from scratch) â† æœ€åé€‰é¡¹
```

### åŸåˆ™ 2: AI è¾…åŠ©ï¼Œäººåšå†³ç­–

```
âŒ é”™è¯¯: AI ç”Ÿæˆæ‰€æœ‰ä»£ç  â†’ äººæ£€æŸ¥
âœ… æ­£ç¡®: äººåšæ¶æ„å†³ç­– â†’ AI æ‰§è¡Œç¹çä»»åŠ¡ â†’ äºº Review ç»“æœ

AI åº”è¯¥åšçš„:
  Â· "è¿™ä¸ªé¡¹ç›®å€¼å¾—æå–å—?" â†’ AI è¯„ä¼°ï¼Œäººæ‹æ¿
  Â· "è¿™æ®µä»£ç çš„ placeholder åœ¨å“ª?" â†’ AI æ ‡è®°ï¼Œäººç¡®è®¤
  Â· "è¿™ä¸ªæ¨¡æ¿è´¨é‡å¦‚ä½•?" â†’ AI Reviewï¼Œäººæœ€ç»ˆåˆ¤æ–­

AI ä¸åº”è¯¥åšçš„:
  Â· ç‹¬ç«‹åšæ¶æ„å†³ç­–
  Â· ç”Ÿæˆæ‰€æœ‰ä¸šåŠ¡é€»è¾‘
  Â· è‡ªåŠ¨å‘å¸ƒæœªå®¡æ ¸çš„æ¨¡æ¿
```

### åŸåˆ™ 3: å…ƒé¡¹ç›®ç‹¬ç«‹äºå…·ä½“é¡¹ç›®

```
âœ… å…ƒé¡¹ç›®å¯ä»¥ç‹¬ç«‹å­˜åœ¨ã€ç‹¬ç«‹æ¼”è¿›
âœ… å…·ä½“é¡¹ç›®é€šè¿‡ .tf.yaml å¼•ç”¨å…ƒé¡¹ç›®
âœ… æ¨¡æ¿æ›´æ–°ä¸å½±å“å·²ç”Ÿæˆçš„é¡¹ç›®
âŒ æ¨¡æ¿ä¸ä¾èµ–ä»»ä½•å…·ä½“é¡¹ç›®çš„ä¸šåŠ¡é€»è¾‘
```

### åŸåˆ™ 4: ç»„åˆä¼˜äºåˆ›é€ 

```
å…ƒé¡¹ç›® = ç°æœ‰å·¥å…·çš„ç¼–æ’å±‚

Ollama (æ¨ç†) + copier (æ¨¡æ¿) + tree-sitter (è§£æ) + gh (GitHub)
                              â”‚
                    è–„èƒ¶æ°´å±‚ (~700 è¡Œä»£ç )
                    + 10 ä¸ª Agent Prompt
                    + æ¨¡æ¿æ–¹æ³•è®º (SKILL.md)
```

---

## 3. åŠŸèƒ½éœ€æ±‚ (Feature Requirements)

### F1: æ¨¡æ¿ç›®å½• (Template Catalog) ğŸ”´ Critical

**æœ¬è´¨**: å…ƒé¡¹ç›®çš„æ ¸å¿ƒèµ„äº§ã€‚

| éœ€æ±‚é¡¹ | è¯¦æƒ… |
|:---|:---|
| æ¨¡æ¿æ ¼å¼ | Jinja2 æ ‡å‡†è¯­æ³• (copier ç›´æ¥æ¶ˆè´¹)  |
| æ¨¡å—å…ƒæ•°æ® | `module-card.yaml` (YAML, æœºå™¨å¯è¯») |
| æ¨¡å—ç´¢å¼• | `index.yaml` (ä¾èµ–å›¾ + åˆ†ç±») |
| å˜é‡è§„èŒƒ | ç»Ÿä¸€å˜é‡è¡¨, copier è‡ªåŠ¨æé—® |
| æ¥æºè¿½æº¯ | æ¯ä¸ªæ¨¡æ¿æ ‡æ³¨ `@source` + GitHub é“¾æ¥ |

**ä¸ç°æœ‰çš„å…³ç³»**ï¼šè¿ç§»ç°æœ‰ 128 ä¸ª `.template` â†’ Jinja2 `.jinja` æ ¼å¼

---

### F2: é¢„ç½®å¥—é¤ (Presets) ğŸ”´ Critical

**æœ¬è´¨**: æ¨¡å—çš„ç»„åˆé…æ–¹ã€‚

```yaml
# presets/rag-chat.yaml
name: rag-chat
description: "RAG èŠå¤©åº”ç”¨ (FastAPI + React + Chat UI + æ–‡æ¡£ä¸Šä¼ )"
modules:
  - backend/fastapi-route
  - backend/rag-pipeline
  - backend/chat-service
  - frontend/chat-ui
  - frontend/chat-citation
  - frontend/zustand-store
  - frontend/document-upload
  - frontend/auth-flow
  - devops/docker-compose
  - devops/github-ci
variables:
  app_name: { prompt: "åº”ç”¨åç§°", default: "My RAG App" }
  api_base_url: { prompt: "API å‰ç¼€", default: "/api/v1" }
  alias: { prompt: "Import åˆ«å", default: "@" }
```

**é¢„ç½®å¥—é¤åˆ—è¡¨**:
- `rag-chat` â€” RAG èŠå¤©åº”ç”¨
- `admin-dashboard` â€” ç®¡ç†åå°
- `api-service` â€” çº¯åç«¯ API
- `ai-agent` â€” å¤šæ™ºèƒ½ä½“ç³»ç»Ÿ

---

### F3: CLI å·¥å…· (tf) ğŸ”´ Critical

**æœ¬è´¨**: å…ƒé¡¹ç›®çš„ç”¨æˆ·ç•Œé¢ã€‚**è–„èƒ¶æ°´å±‚ï¼Œè°ƒç”¨å·²æœ‰å·¥å…·ã€‚**

| å‘½ä»¤ | ä½œç”¨ | åº•å±‚è°ƒç”¨ |
|:---|:---|:---|
| `tf create` | ä»é¢„ç½®å¥—é¤åˆ›å»ºæ–°é¡¹ç›® | â†’ **copier** |
| `tf list` | åˆ—å‡ºæ‰€æœ‰å¯ç”¨æ¨¡æ¿/å¥—é¤ | â†’ è¯» `index.yaml` |
| `tf search` | æœç´¢æ¨¡æ¿åº“ | â†’ è¯» `index.yaml` + æ¨¡ç³ŠåŒ¹é… |
| `tf scan` | æ‰«æ GitHub å‘ç°æ–°é¡¹ç›® | â†’ **gh CLI** + LLM è¯„ä¼° |
| `tf analyze` | åˆ†æé¡¹ç›®æ¶æ„ | â†’ **tree-sitter** + LLM |
| `tf extract` | æå–æ¨¡æ¿ (AI-assisted) | â†’ LLM + æ–¹æ³•è®º |
| `tf status` | æŸ¥çœ‹æ¨¡æ¿åº“ç»Ÿè®¡ | â†’ è¯» `index.yaml` |

**ä»£ç é‡**: ~500-700 è¡Œ Python (Typer CLI åŒ…è£…ï¼Œä¸å«æ¨¡æ¿æ–‡ä»¶)

---

### F4: AI è¾…åŠ©èƒ½åŠ› ğŸŸ  High

**æœ¬è´¨**: æœ¬åœ° LLM ä¸ºä¸Šè¿°å‘½ä»¤æä¾›æ™ºèƒ½åˆ¤æ–­ã€‚ä¸æ˜¯ç‹¬ç«‹ç³»ç»Ÿï¼Œæ˜¯ F3 çš„å¢å¼ºã€‚

| åœºæ™¯ | AI åšä»€ä¹ˆ | äººåšä»€ä¹ˆ |
|:---|:---|:---|
| `tf scan` | è¯„ä¼°é¡¹ç›®è´¨é‡å’Œå¯æå–æ€§ | å†³å®šæ˜¯å¦ clone å’Œæå– |
| `tf analyze` | è¯†åˆ«æ¨¡å—è¾¹ç•Œï¼Œç”Ÿæˆ Module Card è‰ç¨¿ | å®¡æ ¸å¹¶ä¿®æ”¹ Module Card |
| `tf extract` | æ ‡è®° placeholderï¼Œæ¸…ç†ä»£ç  | ç¡®è®¤æ›¿æ¢æ˜¯å¦æ­£ç¡® |
| `tf create` | é€‚é…æ¨¡æ¿é—´çš„ç±»å‹å·®å¼‚ | æ£€æŸ¥ç”Ÿæˆç»“æœ |

**æŠ€æœ¯æ ˆ**: Ollama + Qwen2.5-Coder (æœ¬åœ°, ç¦»çº¿, å…è´¹)

---

### F5: å‚è€ƒé¡¹ç›®ç®¡ç† ğŸŸ¡ Medium

| éœ€æ±‚é¡¹ | è¯¦æƒ… |
|:---|:---|
| æ³¨å†Œè¡¨ | `references/registry.yaml` (38 ä¸ªé¡¹ç›®çš„å…ƒä¿¡æ¯) |
| åˆ†ææŠ¥å‘Š | `references/analysis/*.md` (æ¶æ„åˆ†æ) |
| è‡ªåŠ¨å‘ç° | `tf scan` å®šæœŸæ‰«æ GitHub æ–°é¡¹ç›® |
| License æ£€æŸ¥ | è‡ªåŠ¨è¿‡æ»¤é MIT/Apache/BSD é¡¹ç›® |

---

### F6: æ¨¡æ¿ç®¡ç†é¢æ¿ (Web UI) ğŸ”µ Low (åæœŸ)

**é™ä½ä¼˜å…ˆçº§ç†ç”±**: CLI å·²æ»¡è¶³æ ¸å¿ƒéœ€æ±‚ï¼ŒWeb UI æ˜¯é”¦ä¸Šæ·»èŠ±ã€‚

---

## 4. Buy vs Build å†³ç­–è¡¨

| ç»„ä»¶ | å†³ç­– | å·¥å…· | ç†ç”± |
|:---|:---|:---|:---|
| æœ¬åœ°æ¨¡å‹æ¨ç† | ğŸ“¦ **Buy** | Ollama | ä¸€æ¡å‘½ä»¤, OpenAI-compatible |
| æ¨¡æ¿å®ä¾‹åŒ– | ğŸ“¦ **Buy** | copier | Python æœ€ä½³æ¨¡æ¿å·¥å…·, Jinja2 |
| ä»£ç è§£æ | ğŸ“¦ **Buy** | tree-sitter | å¤šè¯­è¨€, Neovim/VS Code åœ¨ç”¨ |
| GitHub æ“ä½œ | ğŸ“¦ **Buy** | gh CLI + PyGithub | å®˜æ–¹å·¥å…· |
| CLI æ¡†æ¶ | ğŸ“¦ **Buy** | Typer | è‡ªåŠ¨å¸®åŠ©, ç±»å‹å®‰å…¨ |
| æ¨¡æ¿æ–¹æ³•è®º | âœ… **å·²æœ‰** | SKILL.md | 5 çº§æ¡†æ¶ + Module Card |
| æ¨¡æ¿èµ„äº§ | âœ… **å·²æœ‰** | 128 ä¸ª .template | è¿ç§»æ ¼å¼å³å¯ |
| Skills | âœ… **å·²æœ‰** | 11 ä¸ª skill | æ¬è¿åˆ°å…ƒé¡¹ç›® |
| **CLI èƒ¶æ°´ä»£ç ** | âœï¸ **Write** | ~500 è¡Œ | ä¸²è”ä¸Šè¿°å·¥å…· |
| **Agent Prompts** | âœï¸ **Write** | ~10 ä¸ª | å„è§’è‰²çš„ System Prompt |
| **copier æ¨¡æ¿é€‚é…** | âœï¸ **Write** | ~200 è¡Œ | copier.yaml é…ç½® |

**éœ€è¦è‡ªå·±å†™çš„: ~700 è¡Œä»£ç  + ~10 ä¸ª Prompt**

---

## 5. æˆåŠŸæŒ‡æ ‡ (KPIs)

| æŒ‡æ ‡ | ç›®æ ‡ | æµ‹é‡æ–¹æ³• |
|:---|:---|:---|
| `tf create` ç”Ÿæˆé¡¹ç›®æ—¶é—´ | < 2 åˆ†é’Ÿ | è®¡æ—¶ |
| ç”Ÿæˆé¡¹ç›®ä¸€æ¬¡ build é€šè¿‡ç‡ | â‰¥ 90% | CI |
| å¯ç”¨é¢„ç½®å¥—é¤æ•° | â‰¥ 4 ä¸ª | è®¡æ•° |
| æ¨¡æ¿åº“è§„æ¨¡ | â‰¥ 130 ä¸ªæ¨¡å— | `tf status` |
| æ–°æ¨¡æ¿æå–é€Ÿåº¦ (AI-assisted) | < 30 min/æ¨¡å— | è®¡æ—¶ |
| å…ƒé¡¹ç›®è‡ªèº«ä»£ç é‡ | < 1000 è¡Œ (ä¸å«æ¨¡æ¿) | `wc -l` |

---

## 6. ç›®æ ‡ç”¨æˆ· (Personas)

### P1: ä½ è‡ªå·± (Primary, Dog-fooding)
- **å½“å‰**: æ¯æ¬¡æ–°é¡¹ç›®æ‰‹åŠ¨å¤åˆ¶æ¨¡æ¿, æ‰‹åŠ¨æ›¿æ¢å˜é‡
- **ä¹‹å**: `tf create --preset rag-chat --name new-project` â†’ 2 åˆ†é’Ÿæå®š

### P2: å›¢é˜Ÿæˆå‘˜
- **å½“å‰**: ä¸çŸ¥é“æœ‰å“ªäº›æ¨¡æ¿å¯ç”¨, ä»£ç é£æ ¼ä¸ä¸€è‡´
- **ä¹‹å**: `tf list` çœ‹ç›®å½•, `tf create` ä¸€é”®å¯åŠ¨æ ‡å‡†é¡¹ç›®

### P3: æœªæ¥å¼€æºç”¨æˆ· (Long-term)
- å¦‚æœå…ƒé¡¹ç›®åšå¾—å¥½, å¯ä»¥å¼€æºè®©ç¤¾åŒºä½¿ç”¨
- ç±»ä¼¼ `create-t3-app` ä½†æ›´çµæ´» (æ¨¡å—å¯é€‰)

---

## 7. çº¦æŸ (Constraints)

| çº¦æŸ | è¯´æ˜ |
|:---|:---|
| AI ä¸æ›¿ä»£äºº | AI åšå»ºè®®, äººåšå†³ç­–, äººå®¡æ ¸ç»“æœ |
| ä¸é‡å¤é€ è½®å­ | æœ‰æˆç†Ÿå·¥å…·å°±ä¸è‡ªå·±å†™ |
| æ¨¡æ¿æ ¼å¼æ ‡å‡†åŒ– | Jinja2 + copier, ä¸å‘æ˜æ–°è¯­æ³• |
| å…ƒé¡¹ç›®ç‹¬ç«‹ | ä¸ä¾èµ–ä»»ä½•å…·ä½“é¡¹ç›®çš„ä¸šåŠ¡ä»£ç  |
| æœ¬åœ°ä¼˜å…ˆ | æ ¸å¿ƒåŠŸèƒ½ç¦»çº¿å¯ç”¨ |
| æ¸è¿›å¼ | å…ˆè¿ç§»ç°æœ‰èµ„äº§, å†åŠ  AI å¢å¼º |

---

## 8. è·¯çº¿å›¾ (Roadmap)

| Phase | åç§° | æ—¶é—´ | æ ¸å¿ƒäº§å‡º |
|:---|:---|:---|:---|
| **P1** | å…ƒé¡¹ç›®åˆ›å»º + èµ„äº§è¿ç§» | 1-2 å¤© | ç‹¬ç«‹ä»“åº“, æ¨¡æ¿æ¬è¿ |
| **P2** | æ¨¡æ¿æ ¼å¼æ ‡å‡†åŒ– | 2-3 å¤© | .template â†’ .jinja, module-card.yaml |
| **P3** | CLI å·¥å…· (tf create/list) | 2-3 å¤© | åŸºäº copier çš„é¡¹ç›®ç”Ÿæˆ |
| **P4** | AI å¢å¼º (tf scan/analyze/extract) | 3-5 å¤© | Ollama + Prompts |
| **P5** | éªŒè¯ | 1 å¤© | ç”¨å…ƒé¡¹ç›®é‡æ–°ç”Ÿæˆç°æœ‰é¡¹ç›® |

**æ€»è®¡: ~2 å‘¨**

---

## 9. ç›¸å…³æ–‡æ¡£

- [ç³»ç»Ÿæ¶æ„è®¾è®¡](../architecture/template-factory-architecture.md)
- [å®æ–½è®¡åˆ’](../plans/template-factory-plan.md)
- [ç°æœ‰æ¨¡æ¿æå–è®¡åˆ’](../plans/TEMPLATE_EXTRACTION_PLAN.md)
- [Template Extraction SKILL](../../.agent/skills/dev-template_extraction/SKILL.md)
- [ç°æœ‰æ¨¡æ¿åº“](../../.agent/templates/README.md)

---

**Document Maintained By**: Development Team  
**Last Updated**: 2026-02-12  
**Next Review**: 2026-02-26
