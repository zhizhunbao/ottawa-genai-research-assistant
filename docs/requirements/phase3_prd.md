# Phase 3 PRD: 高级功能与生产

**Phase**: 3 of 3  
**时间**: 4 周  
**状态**: ⏳ 未来  
**前置**: Phase 2 完成  
**术语规范**: 参见 `dev-terminology`

---

## 目标

实现高级分析功能、质量评估框架，并完成生产环境部署。

---

## 用户故事

### US-301: 图表可视化

**作为** 经济发展分析师，  
**我想要** 聊天回答中包含数据图表，  
**以便** 直观理解经济趋势。

**验收标准**:

- [ ] 支持折线图、柱状图、饼图
- [ ] 图表基于检索数据动态生成
- [ ] 支持客户端渲染（Recharts）
- [ ] 图表可导出为 PNG/PDF
- [ ] 图表包含数据来源标注

### US-302: 动态报告仪表盘

**作为** 经济发展分析师，  
**我想要** 报告页面显示真实统计数据，  
**以便** 了解系统使用情况。

**验收标准**:

- [ ] 报告数据来自后端 API（非硬编码）
- [ ] 显示文档总数、已索引数、查询次数
- [ ] 支持按时间范围筛选
- [ ] 数据实时更新

### US-303: LLM 评估框架

**作为** 开发者，  
**我想要** 自动评估 LLM 响应质量，  
**以便** 持续监控和优化系统。

**验收标准**:

- [ ] 实现 6 维度评估：Coherence, Relevancy, Completeness, Grounding, Helpfulness, Faithfulness
- [ ] 每个维度评分 1-5
- [ ] 评估结果存储并可查询
- [ ] 低于阈值时触发告警
- [ ] 生成周期性评估报告

### US-304: 生产部署

**作为** 系统管理员，  
**我想要** 将系统部署到 Azure 生产环境，  
**以便** 提供稳定的服务。

**验收标准**:

- [ ] 前端部署到 Azure Static Web Apps
- [ ] 后端部署到 Azure Container Apps
- [ ] 配置 Application Insights 监控
- [ ] 配置告警规则
- [ ] 系统可用性 ≥ 99.5%

### US-305: 演示文档

**作为** 项目经理，  
**我想要** 完整的演示材料，  
**以便** 向利益相关者展示成果。

**验收标准**:

- [ ] 演示视频（5-10 分钟）
- [ ] 用户使用指南
- [ ] API 文档
- [ ] Azure 资源配置截图
- [ ] Live API 调用演示

---

## 技术任务

| 任务                       | 优先级 | 依赖         |
| -------------------------- | ------ | ------------ |
| Recharts 图表组件          | P1     | Phase 2      |
| 图表生成 API               | P1     | RAG 功能     |
| 报告统计 API               | P1     | 无           |
| LLM 评估服务               | P1     | RAG 功能     |
| Azure Container Apps 部署  | P0     | 所有功能完成 |
| Azure Static Web Apps 部署 | P0     | 前端完成     |
| CI/CD 流水线               | P1     | 部署完成     |
| Application Insights 配置  | P1     | 部署完成     |
| 演示视频录制               | P0     | 所有功能完成 |
| 文档编写                   | P0     | 所有功能完成 |

---

## LLM 评估框架规格

| 评估维度     | 说明                       | 目标分数  |
| ------------ | -------------------------- | --------- |
| Coherence    | 回答逻辑连贯性             | ≥ 4.0/5.0 |
| Relevancy    | 回答与问题相关性           | ≥ 4.0/5.0 |
| Completeness | 回答完整性                 | ≥ 3.5/5.0 |
| Grounding    | 回答基于检索内容（非幻觉） | ≥ 4.5/5.0 |
| Helpfulness  | 回答实用性                 | ≥ 4.0/5.0 |
| Faithfulness | 回答与引用一致性           | ≥ 4.5/5.0 |

---

## 成功标准

- [ ] 用户可获得图表可视化回答
- [ ] 报告仪表盘显示实时数据
- [ ] LLM 评估框架自动运行
- [ ] 系统部署到 Azure 生产环境
- [ ] 演示材料完整交付

---

## 风险与缓解

| 风险         | 缓解措施                    |
| ------------ | --------------------------- |
| 图表生成延迟 | 使用客户端渲染减轻后端压力  |
| 评估成本高   | 采样评估而非全量评估        |
| 部署复杂     | 使用 Infrastructure as Code |

---

_Phase 3 of Ottawa GenAI Research Assistant. See [master_prd.md](master_prd.md) for overview._
