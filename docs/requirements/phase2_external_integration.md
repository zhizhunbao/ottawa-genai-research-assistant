# PRD: Phase 2 - 外部数据集成与高级分析

**状态**: 进行中 (Active)
**目标**: 扩展数据源至外部 API（StatsCan）和网页抓取，并提供增强的数据可视化分析。

---

## 1. 核心功能 (Phase 2 Features)

### 1.1 外部 API 集成 (StatsCan)

- **数据集对接**: 实时调用加拿大统计局 API 获取渥太华及其周边的宏观经济数据。
- **数据对齐**: 将外部 API 获得的时间序列数据与内部 PDF 中的季度报告进行对齐分析。

### 1.2 增强可视化 (Enhanced Analytics)

- **动态图表**: 自动将搜索结果中的数值转化为折线图、柱状图或饼图。
- **自定义导出版式**: 允许用户导出带美学设计的分析简报。

### 1.3 身份认证迁移 (Auth Migration)

- **Azure Entra ID**: 全面替换旧有的 Google OAuth，实现城市级别的单点登录 (SSO)。

---

## 2. 验收标准 (Acceptance Criteria)

### AC-1: 数据融合

- [ ] 系统应能同时检索出“内部报告提及的增长率”与“StatsCan 对应的原始数值”。
- [ ] 检索跨度应覆盖 Q1 2022 到最新可用数据。

### AC-2: 分析模块

- [ ] 图表组件必须由 `recharts` 驱动，且样式必须符合毛玻璃和渐变色设计。
- [ ] 导出报告的 P95 响应时间应小于 5 秒。

### AC-3: 安全性

- [ ] 仅持有 `@ottawa.ca` 后缀的用户能通过 AAD 登录。

---

_Follows dev-prd skill._
