/**
 * Spinner - Standardized loading spinner with configurable size and variant
 *
 * @module shared/components/ui/spinner
 * @source bulletproof-react/apps/react-vite/src/components/ui/spinner/spinner.tsx (51L)
 * @reference https://github.com/alan2207/bulletproof-react
 * @template S2-M1-F3
 *
 * Features:
 * - Four sizes: sm (16px), md (32px), lg (64px), xl (96px)
 * - Two color variants: primary (foreground), light (white)
 * - Accessible sr-only "Loading" label
 * - CSS animation (animate-spin)
 * - Centered container variant for full-page/section loading
 *
 * Usage:
 * ```tsx
 * // Inline spinner
 * <Spinner size="sm" />
 *
 * // Full-page centered loading
 * <SpinnerOverlay />
 *
 * // Section loading
 * <SpinnerOverlay className="h-64" />
 *
 * // Custom color
 * <Spinner variant="light" size="lg" />
 * ```
 */

import * as React from "react";

// ─── Types ───────────────────────────────────────────────────────────────────

export type SpinnerSize = "sm" | "md" | "lg" | "xl";
export type SpinnerVariant = "primary" | "light";

export interface SpinnerProps {
  /** Spinner size */
  size?: SpinnerSize;
  /** Color variant */
  variant?: SpinnerVariant;
  /** Additional CSS class */
  className?: string;
}

export interface SpinnerOverlayProps {
  /** Spinner size (default: xl) */
  size?: SpinnerSize;
  /** Additional CSS class for the container */
  className?: string;
}

// ─── Style Maps ──────────────────────────────────────────────────────────────

const sizeMap: Record<SpinnerSize, string> = {
  sm: "h-4 w-4",
  md: "h-8 w-8",
  lg: "h-16 w-16",
  xl: "h-24 w-24",
};

const variantMap: Record<SpinnerVariant, string> = {
  primary: "text-[var(--color-foreground)]",
  light: "text-white",
};

// ─── Spinner Component ───────────────────────────────────────────────────────

export const Spinner: React.FC<SpinnerProps> = ({
  size = "md",
  variant = "primary",
  className = "",
}) => {
  return (
    <>
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        strokeWidth="2"
        strokeLinecap="round"
        strokeLinejoin="round"
        className={`animate-spin ${sizeMap[size]} ${variantMap[variant]} ${className}`}
        role="status"
        aria-label="Loading"
      >
        <path d="M21 12a9 9 0 1 1-6.219-8.56" />
      </svg>
      <span className="sr-only">Loading</span>
    </>
  );
};

// ─── Spinner Overlay (full container centered) ───────────────────────────────

export const SpinnerOverlay: React.FC<SpinnerOverlayProps> = ({
  size = "xl",
  className = "",
}) => {
  return (
    <div
      className={`flex h-screen w-full items-center justify-center ${className}`}
    >
      <Spinner size={size} />
    </div>
  );
};

Spinner.displayName = "Spinner";
SpinnerOverlay.displayName = "SpinnerOverlay";

export default Spinner;
