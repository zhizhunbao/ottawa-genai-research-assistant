/**
 * Mini Chart Components - Line, Bar, Pie, Area wrappers
 *
 * @module frontend/features/dashboard/mini-chart
 * @source ui-horizon-chakra/src/components/charts/LineChart.tsx (24L)
 * @source ui-horizon-chakra/src/components/charts/BarChart.tsx (24L)
 * @source ui-horizon-chakra/src/components/charts/PieChart.tsx (24L)
 * @source ui-horizon-chakra/src/components/charts/LineAreaChart.tsx (24L)
 * @reference https://github.com/horizon-ui/horizon-ui-chakra-nextjs
 * @template S6-M1-F2
 *
 * Lightweight chart wrapper components:
 * 1. MiniLineChart â€” sparkline / trend line
 * 2. MiniBarChart â€” bar comparison
 * 3. MiniPieChart â€” distribution donut/pie
 * 4. MiniAreaChart â€” filled area trend
 * 5. ChartCard â€” card wrapper with title and chart
 *
 * Key patterns from Horizon UI:
 * - Dynamic import with next/dynamic (SSR disabled)
 * - Generic props: { chartData, chartOptions }
 * - 100% width/height for responsive sizing
 * - Composable with dashboard card layouts
 */

import React from "react";

// â”€â”€â”€ Types â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export type ChartType = "line" | "bar" | "pie" | "area";

export interface ChartDataSeries {
  name: string;
  data: number[];
}

export interface ChartProps {
  /** Array of data series */
  chartData: ChartDataSeries[] | number[];
  /** Chart configuration options (ApexCharts-compatible) */
  chartOptions: Record<string, unknown>;
  /** Chart height in pixels */
  height?: number;
  /** Chart width (CSS value) */
  width?: string;
}

export interface ChartCardProps extends ChartProps {
  /** Card title */
  title: string;
  /** Optional subtitle or description */
  subtitle?: string;
  /** Chart type to render */
  type: ChartType;
  /** Optional action element (e.g., dropdown, button) */
  action?: React.ReactNode;
}

// â”€â”€â”€ Chart Card Styles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

const cardStyles = {
  container: {
    background: "var(--card-bg, #ffffff)",
    borderRadius: "var(--radius-lg, 16px)",
    padding: "20px",
    boxShadow: "var(--shadow-sm, 0 1px 3px rgba(0,0,0,0.08))",
  } as React.CSSProperties,

  header: {
    display: "flex",
    justifyContent: "space-between",
    alignItems: "flex-start",
    marginBottom: "16px",
  } as React.CSSProperties,

  title: {
    fontSize: "var(--text-lg, 18px)",
    fontWeight: 700,
    color: "var(--text-primary, #1b2559)",
    lineHeight: 1.3,
  } as React.CSSProperties,

  subtitle: {
    fontSize: "var(--text-sm, 14px)",
    color: "var(--text-secondary, #a3aed0)",
    marginTop: "4px",
  } as React.CSSProperties,

  chartContainer: {
    width: "100%",
    position: "relative" as const,
    minHeight: "200px",
  } as React.CSSProperties,

  placeholder: {
    width: "100%",
    display: "flex",
    alignItems: "center",
    justifyContent: "center",
    color: "var(--text-secondary, #a3aed0)",
    fontSize: "var(--text-sm, 14px)",
    background: "var(--bg-secondary, #f4f7fe)",
    borderRadius: "var(--radius-md, 12px)",
    minHeight: "200px",
  } as React.CSSProperties,
};

// â”€â”€â”€ Chart Placeholder â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// In production, replace with actual chart library (ApexCharts, Chart.js, etc.)

function ChartPlaceholder({
  type,
  height = 200,
}: {
  type: ChartType;
  height?: number;
}) {
  return (
    <div style={{ ...cardStyles.placeholder, height: `${height}px` }}>
      <span>
        ðŸ“Š {type.charAt(0).toUpperCase() + type.slice(1)} Chart
        <br />
        <small>Replace with ApexCharts / Chart.js / Recharts</small>
      </span>
    </div>
  );
}

// â”€â”€â”€ Mini Chart Components â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// @source ui-horizon-chakra/src/components/charts/LineChart.tsx (8-21L)
// @source ui-horizon-chakra/src/components/charts/BarChart.tsx (8-21L)

/**
 * Generic chart component â€” renders a placeholder by default.
 *
 * To integrate a real chart library:
 * ```tsx
 * import dynamic from 'next/dynamic';
 * const Chart = dynamic(() => import('react-apexcharts'), { ssr: false });
 *
 * export function MiniChart({ type, chartData, chartOptions, height }: ChartProps & { type: ChartType }) {
 *   return <Chart options={chartOptions} type={type} width="100%" height={height} series={chartData} />;
 * }
 * ```
 */
export function MiniChart({
  type,
  chartData,
  chartOptions,
  height = 200,
}: ChartProps & { type: ChartType }) {
  // TODO: Replace with real chart library integration
  // For Next.js:
  //   const Chart = dynamic(() => import('react-apexcharts'), { ssr: false });
  //   return <Chart options={chartOptions} type={type} width="100%" height={height} series={chartData} />;
  return <ChartPlaceholder type={type} height={height} />;
}

// â”€â”€â”€ Convenience Wrappers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export function MiniLineChart(props: ChartProps) {
  return <MiniChart type="line" {...props} />;
}

export function MiniBarChart(props: ChartProps) {
  return <MiniChart type="bar" {...props} />;
}

export function MiniPieChart(props: ChartProps) {
  return <MiniChart type="pie" {...props} />;
}

export function MiniAreaChart(props: ChartProps) {
  return <MiniChart type="area" {...props} />;
}

// â”€â”€â”€ Chart Card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

export function ChartCard({
  title,
  subtitle,
  type,
  action,
  ...chartProps
}: ChartCardProps) {
  return (
    <div style={cardStyles.container} className="chart-card">
      <div style={cardStyles.header}>
        <div>
          <div style={cardStyles.title}>{title}</div>
          {subtitle && <div style={cardStyles.subtitle}>{subtitle}</div>}
        </div>
        {action}
      </div>
      <div style={cardStyles.chartContainer}>
        <MiniChart type={type} {...chartProps} />
      </div>
    </div>
  );
}

// â”€â”€â”€ Usage Example â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
//
// <ChartCard
//   title="Total Queries"
//   subtitle="Weekly trend"
//   type="line"
//   chartData={[{ name: "Queries", data: [10, 20, 15, 30, 25, 40, 35] }]}
//   chartOptions={{ xaxis: { categories: ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"] } }}
//   height={280}
// />

export default ChartCard;
