/**
 * Main Navigation
 *
 * Responsive top navigation with logo, nav links, and mobile menu toggle.
 *
 * @source taxonomy (shadcn official)
 * @router Adapt Link component for your router
 * @i18n Replace nav item titles with t() calls
 *
 * @example
 * const navItems = [
 *   { title: 'Features', href: '/#features' },
 *   { title: 'Pricing', href: '/pricing' },
 *   { title: 'Docs', href: '/docs' },
 * ]
 * <MainNav items={navItems} />
 */
'use client'

import * as React from 'react'
import { Link, useLocation } from 'react-router-dom' // Change to your router
import { Menu, X } from 'lucide-react'
import { cn } from '{{alias}}/lib/utils'
import { MobileNav } from './mobile-nav'

export type NavItem = {
  title: string
  href: string
  disabled?: boolean
}

interface MainNavProps {
  items?: NavItem[]
  siteName?: string
  logo?: React.ReactNode
  children?: React.ReactNode
}

export function MainNav({
  items,
  siteName = 'App Name',
  logo,
  children,
}: MainNavProps) {
  const location = useLocation()
  const segment = location.pathname.split('/')[1]
  const [showMobileMenu, setShowMobileMenu] = React.useState(false)

  return (
    <div className="flex gap-6 md:gap-10">
      <Link to="/" className="hidden items-center space-x-2 md:flex">
        {logo || <div className="h-6 w-6 rounded-md bg-primary" />}
        <span className="hidden font-bold sm:inline-block">{siteName}</span>
      </Link>

      {items?.length ? (
        <nav className="hidden gap-6 md:flex">
          {items.map((item, index) => (
            <Link
              key={index}
              to={item.disabled ? '#' : item.href}
              className={cn(
                'flex items-center text-lg font-medium transition-colors hover:text-foreground/80 sm:text-sm',
                item.href.startsWith(`/${segment}`)
                  ? 'text-foreground'
                  : 'text-foreground/60',
                item.disabled && 'cursor-not-allowed opacity-80'
              )}
            >
              {item.title}
            </Link>
          ))}
        </nav>
      ) : null}

      <button
        className="flex items-center space-x-2 md:hidden"
        onClick={() => setShowMobileMenu(!showMobileMenu)}
      >
        {showMobileMenu ? (
          <X className="h-6 w-6" />
        ) : (
          logo || <Menu className="h-6 w-6" />
        )}
        <span className="font-bold">Menu</span>
      </button>

      {showMobileMenu && items && (
        <MobileNav items={items} siteName={siteName} onClose={() => setShowMobileMenu(false)}>
          {children}
        </MobileNav>
      )}
    </div>
  )
}

