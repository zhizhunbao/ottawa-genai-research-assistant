"""
{{FeatureName}} Prompts

Prompt 模板管理，支持多语言和变量替换。
"""

from enum import Enum
from typing import Optional


class PromptTemplate(Enum):
    """Prompt 模板枚举"""

    SYSTEM = "system"
    USER = "user"
    # TODO: 添加更多模板类型


# Prompt 模板定义
PROMPTS: dict[str, dict[str, str]] = {
    "system": {
        "en": """You are a helpful assistant.
Context: {context}
""",
        "fr": """Vous êtes un assistant utile.
Contexte: {context}
""",
    },
    "user": {
        "en": "Question: {question}",
        "fr": "Question: {question}",
    },
    # TODO: 添加更多 prompts
}


def get_prompt(
    template: str,
    lang: str = "en",
    **kwargs,
) -> str:
    """
    获取格式化的 prompt

    Args:
        template: 模板名称
        lang: 语言 (en/fr)
        **kwargs: 模板变量

    Returns:
        格式化后的 prompt
    """
    prompt_template = PROMPTS.get(template, {}).get(lang)
    if not prompt_template:
        raise ValueError(f"Prompt not found: {template}/{lang}")

    return prompt_template.format(**kwargs)


def build_messages(
    question: str,
    context: str = "",
    lang: str = "en",
) -> list[dict[str, str]]:
    """构建聊天消息列表"""
    return [
        {"role": "system", "content": get_prompt("system", lang, context=context)},
        {"role": "user", "content": get_prompt("user", lang, question=question)},
    ]
