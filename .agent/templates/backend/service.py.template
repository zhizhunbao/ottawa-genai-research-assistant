"""
{{feature_name}} 服务层

包含 {{feature_name}} 相关的业务逻辑。
Created: {{date}}
"""

import logging
from typing import Optional, List

from sqlalchemy.ext.asyncio import AsyncSession

from app.{{feature_name}}.schemas import (
    {{FeatureName}}Create,
    {{FeatureName}}Response,
    {{FeatureName}}Update,
    {{FeatureName}}List,
)
from app.{{feature_name}}.models import {{FeatureName}}

logger = logging.getLogger(__name__)


class {{FeatureName}}Service:
    """{{FeatureName}} 服务类"""

    def __init__(self, db: AsyncSession) -> None:
        """
        初始化服务

        Args:
            db: 数据库会话
        """
        self._db = db

    async def list(
        self,
        skip: int = 0,
        limit: int = 20,
    ) -> {{FeatureName}}List:
        """获取 {{feature_name}} 列表"""
        # TODO: 实现分页查询逻辑
        items: List[{{FeatureName}}Response] = []
        total = 0

        return {{FeatureName}}List(
            items=items,
            total=total,
            skip=skip,
            limit=limit,
        )

    async def get(self, id: str) -> Optional[{{FeatureName}}Response]:
        """根据 ID 获取单个 {{feature_name}}"""
        # TODO: 实现查询逻辑
        return None

    async def create(self, data: {{FeatureName}}Create) -> {{FeatureName}}Response:
        """创建新的 {{feature_name}}"""
        logger.info(f"Creating new {{feature_name}}: {data}")

        # TODO: 实现创建逻辑
        # 1. 验证数据
        # 2. 创建实体
        # 3. 保存到数据库
        # 4. 返回响应

        raise NotImplementedError("TODO: Implement create logic")

    async def update(
        self,
        id: str,
        data: {{FeatureName}}Update,
    ) -> Optional[{{FeatureName}}Response]:
        """更新 {{feature_name}}"""
        logger.info(f"Updating {{feature_name}} {id}: {data}")

        # TODO: 实现更新逻辑
        # 1. 查找现有实体
        # 2. 验证数据
        # 3. 更新字段
        # 4. 保存到数据库
        # 5. 返回响应

        return None

    async def delete(self, id: str) -> bool:
        """删除 {{feature_name}}"""
        logger.info(f"Deleting {{feature_name}} {id}")

        # TODO: 实现删除逻辑
        # 1. 查找现有实体
        # 2. 执行删除 (软删除或硬删除)
        # 3. 返回结果

        return False
